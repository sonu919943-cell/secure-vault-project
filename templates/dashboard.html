<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secure Asset Manager</title>
    <style>
        :root { --primary: #00d2ff; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; }
        
        /* Sidebar Styling */
        .sidebar { width: 300px; background: #111827; padding: 25px; border-right: 1px solid #334155; }
        .sidebar h2 { color: var(--primary); font-size: 1.5rem; margin-bottom: 30px; }
        input, select { width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; box-sizing: border-box; }
        .add-btn { width: 100%; padding: 12px; background: var(--primary); border: none; border-radius: 8px; color: black; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .add-btn:hover { background: #0099cc; }

        /* Main Content */
        .main { flex: 1; padding: 40px; overflow-y: auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        #search { width: 300px; margin: 0; }

        /* Card Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #334155; position: relative; transition: 0.3s; }
        .card:hover { border-color: var(--primary); transform: translateY(-5px); }
        .category-tag { font-size: 0.7rem; background: #334155; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; color: var(--primary); }
        .pass-container { display: flex; align-items: center; background: #0f172a; padding: 10px; border-radius: 6px; margin: 15px 0; }
        .pass-container input { border: none; background: transparent; margin: 0; font-family: monospace; }
        .copy-btn { background: transparent; border: none; cursor: pointer; color: var(--primary); font-size: 1.2rem; }
        .del-btn { color: #ff4d4d; text-decoration: none; font-size: 0.8rem; float: right; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>üõ°Ô∏è Asset Manager</h2>
    <form action="/add" method="POST">
        <select name="category">
            <option value="Social Media">Social Media</option>
            <option value="Banking">Banking</option>
            <option value="Work">Work</option>
            <option value="Personal">Personal</option>
        </select>
        <input type="text" name="title" placeholder="Service Name (e.g. Netflix)" required>
        <input type="text" name="username" placeholder="Username/Email" required>
        <input type="password" name="password" placeholder="Password" required>
        <button type="submit" class="add-btn">Add New Asset</button>
    </form>
</div>

<div class="main">
    <div class="header">
        <h1>Your Secure Vault</h1>
        <input type="text" id="search" onkeyup="filterCards()" placeholder="Search assets...">
    </div>

    <div class="grid" id="assetGrid">
        {% for a in assets %}
        <div class="card" data-title="{{ a.title.lower() }}">
            <span class="category-tag">{{ a.category }}</span>
            <a href="/delete/{{ a.id }}" class="del-btn" onclick="return confirm('Are you sure?')">Delete</a>
            <h3>{{ a.title }}</h3>
            <p style="font-size: 0.9rem; color: #94a3b8;">User: {{ a.username }}</p>
            
            <div class="pass-container">
                <input type="password" value="{{ a.decrypted_val }}" id="p{{ a.id }}" readonly>
                <button class="copy-btn" onclick="copyToClipboard('p{{ a.id }}')">üìã</button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script>
    function copyToClipboard(id) {
        var input = document.getElementById(id);
        input.type = "text";
        input.select();
        document.execCommand("copy");
        input.type = "password";
        alert("Password Copied!");
    }

    function filterCards() {
        let input = document.getElementById('search').value.toLowerCase();
        let cards = document.getElementsByClassName('card');
        for (let card of cards) {
            if (card.getAttribute('data-title').includes(input)) {
                card.style.display = "block";
            } else {
                card.style.display = "none";
            }
        }
    }
</script>

</body>
</html>